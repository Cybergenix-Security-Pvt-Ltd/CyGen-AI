<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tejas's Voice Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="/eel.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        #interaction-log {
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">
    <header class="bg-blue-600 text-white p-4">
        <h1 class="text-2xl font-bold">Tejas's Voice Assistant</h1>
        <p id="status" class="text-sm">Initializing...</p>
    </header>
    <main class="flex-grow p-4 max-w-4xl mx-auto">
        <div class="bg-white rounded-lg shadow p-6 mb-4">
            <h2 class="text-xl font-semibold mb-2">Current Interaction</h2>
            <p class="text-gray-700"><strong>Command:</strong> <span id="current-command">Waiting for input...</span>
            </p>
            <p class="text-gray-700"><strong>Response:</strong> <span id="current-response">Assistant is ready!</span>
            </p>
        </div>
        <div class="bg-white rounded-lg shadow p-6 mb-4">
            <h2 class="text-xl font-semibold mb-2">Controls</h2>
            <div class="grid grid-cols-2 gap-2 sm:grid-cols-3 md:grid-cols-4">
                <button onclick="captureImage()"
                    class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Capture Image</button>
                <button onclick="muteSystem()"
                    class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Mute</button>
                <button onclick="unmuteSystem()"
                    class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Unmute</button>
                <button onclick="volumeUp()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Volume
                    Up</button>
                <button onclick="volumeDown()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Volume
                    Down</button>
                <button onclick="openApp()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Open
                    App</button>
                <button onclick="closeApp()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Close
                    App</button>
                <button onclick="googleSearch()"
                    class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">Google Search</button>
                <button onclick="youtubeSearch()"
                    class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">YouTube Search</button>
                <button onclick="playMusic()"
                    class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">Play Music</button>
                <button onclick="setReminder()" class="bg-teal-500 text-white px-4 py-2 rounded hover:bg-teal-600">Set
                    Reminder</button>
            </div>
            <input id="manual-input" type="text" class="mt-4 w-full p-2 border rounded"
                placeholder="Enter app name or search query">
        </div>
        <div class="bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-semibold mb-2">Interaction Log</h2>
            <div id="interaction-log" class="text-gray-700"></div>
        </div>
    </main>
    <script>
        async function updateStatus() {
            document.getElementById('status').innerText = 'Listening...';
            let command = await eel.listen()();
            if (command !== 'nothing') {
                document.getElementById('current-command').innerText = command;
                let response = await eel.get_response()();
                document.getElementById('current-response').innerText = response;
                addToLog(command, response);
            }
            setTimeout(updateStatus, 1000); // Poll every second
        }

        function addToLog(command, response) {
            const log = document.getElementById('interaction-log');
            const entry = document.createElement('p');
            entry.innerHTML = `<strong>Command:</strong> ${command}<br><strong>Response:</strong> ${response}`;
            log.insertBefore(entry, log.firstChild); // Newest entries at the top
            if (log.children.length > 10) {
                log.removeChild(log.lastChild); // Limit log to 10 entries
            }
        }

        async function captureImage() {
            const response = await eel.capture_image()();
            document.getElementById('current-response').innerText = response;
            addToLog('Capture Image', response);
        }

        async function muteSystem() {
            const response = await eel.mute_system()();
            document.getElementById('current-response').innerText = response;
            addToLog('Mute System', response);
        }

        async function unmuteSystem() {
            const response = await eel.unmute_system()();
            document.getElementById('current-response').innerText = response;
            addToLog('Unmute System', response);
        }

        async function volumeUp() {
            const response = await eel.set_volume_up()();
            document.getElementById('current-response').innerText = response;
            addToLog('Volume Up', response);
        }

        async function volumeDown() {
            const response = await eel.set_volume_down()();
            document.getElementById('current-response').innerText = response;
            addToLog('Volume Down', response);
        }

        async function openApp() {
            const appName = document.getElementById('manual-input').value;
            if (appName) {
                const response = await eel.open_app(appName)();
                document.getElementById('current-response').innerText = response;
                addToLog(`Open App: ${appName}`, response);
            }
        }

        async function closeApp() {
            const appName = document.getElementById('manual-input').value;
            if (appName) {
                const response = await eel.close_app(appName)();
                document.getElementById('current-response').innerText = response;
                addToLog(`Close App: ${appName}`, response);
            }
        }

        async function googleSearch() {
            const query = document.getElementById('manual-input').value;
            if (query) {
                const response = await eel.google_search(query)();
                document.getElementById('current-response').innerText = response;
                addToLog(`Google Search: ${query}`, response);
            }
        }

        async function youtubeSearch() {
            const query = document.getElementById('manual-input').value;
            if (query) {
                const response = await eel.youtube_search(query)();
                document.getElementById('current-response').innerText = response;
                addToLog(`YouTube Search: ${query}`, response);
            }
        }

        async function playMusic() {
            const query = document.getElementById('manual-input').value;
            if (query) {
                const response = await eel.play_music(query)();
                document.getElementById('current-response').innerText = response;
                addToLog(`Play Music: ${query}`, response);
            }
        }

        async function setReminder() {
            const reminderText = document.getElementById('manual-input').value;
            if (reminderText) {
                const response = await eel.set_reminder(reminderText)();
                document.getElementById('current-response').innerText = response;
                addToLog(`Set Reminder: ${reminderText}`, response);
            }
        }

        // Start listening on page load
        window.onload = updateStatus;
    </script>
</body>

</html>
